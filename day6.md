# day6

​																																																				时间：2022年4月11日21:11:07

## 目录

- Linux常用服务类相关命令
- git分支相关命令
- redis持久化
- mysql什么时候建立索引

## 一、Linux常用服务类相关命令

### 1.contos6

#### a.注册在系统中的标准化程序

#### b.有方便统一的管理方式（常用的方法)

- service 服务名 start

- service 服务名 stop

- service 服务名 restart

- service 服务名 reload.

- service 服务名 status

#### c.查看服务的方法letclinit.d/服务名

#### d.通过chkconfig命令设置自启动

查看服务chkconfig --list | grep XXX.

chkconfig --level 5 服务名 on

chkconfig --level 5 服务名 on

#### e.运行级别

<img src="D:\桌面\面试题\pic\Untitled\1649683123707.png" alt="1649683123707" style="zoom:67%;" />

### 2.contos7

<img src="D:\桌面\面试题\pic\Untitled\1649683542100.png" alt="1649683542100" style="zoom:67%;" />

## 二、git分支相关命令

### 1.命令

#### a.创建分支

-  git branch<分支名>·

- git branch -v 查看分支

#### b.切换分支

- git checkout<分支名>

- 一步完成: git checkout -b <分支名>

#### c.合并分支

- 先切换到主干git checkout master

- git merge<分支名>

#### d.删除分支

- 先切换到主干git checkout master

- git branch -D<分支名>

### 2.工作流

<img src="D:\桌面\面试题\pic\Untitled\1649684221522.png" alt="1649684221522" style="zoom:67%;" />

## 三、redis持久化

### 备份是如何进行的

```
Redis会单独创建(fork)一个子进程来进行持久化，会先将数据写入到一个临时文件中，待持久化过程都结束了，再用这个临时文件替换上次持久化好的文件。整个过程中，主进程是不进行任何IO操作的，这就确保了极高的性能如果需要进行大规模数据的恢复，且对于数据恢复的完整性不是非常敏感，那RDB方式要比AOF方式更加的高效。RDB的缺点是最后一次持久化后的数据可能丢失。
```

### 1.RDB

#### a.rdb的优点

- 节省磁盘空间
- 恢复速度快

<img src="D:\桌面\面试题\pic\Untitled\1649684710719.png" alt="1649684710719" style="zoom: 67%;" />

#### b.rdb的缺点

- 虽然Redis在fork时使用了写时拷贝技术,但是如果数据庞大时还是比较消耗性能。

- 在备份周期在一定间隔时间做一 次备份，所以如果Redis意外down掉的话,就会丢失最后-次快照后的所有修改。

### 2.AOF

#### a.描述

```
以日志的形式来记录每个写操作，将Redis执行过的所有写指令记录下来(读操作不记录)，只许追加文件但不
可以改写文件，Redis启动之初会读取该文件重新构建数据，换言之，Redis重启的话就根据日志文件的内容
将写指令从前到后执行一-次以完成数据的恢复工作。
```

#### b.优点

- 备份机制更稳健，丢失数据概率更低。
- 可读的日志文本，通过操作AOF稳健，可以处理误操作。
- <img src="D:\桌面\面试题\pic\Untitled\1649684851932.png" alt="1649684851932" style="zoom:67%;" />

#### c.缺点

- 比起RQB占用更多的磁盘空间。

- 恢复备份速度要慢。

- 每次读写都同步的话，有一定的性能压力。

- 存在个别Bug，造成恢复不能。

  

## 四、mysql什么时候建索引

### 1.是什么

MySQL官方对索引的定义为:索引(Index)是帮助MySQL高效获取数据的数据结构。

可以得到索引的本质:索引是数据结构。

你可以简单理解为“排好序的快速查找数据结构”

一般来说索引本身也很大，不可能全部存储在内存中，因此索引往往以索引文件的形式存储的磁盘上

### 2.优势

- 类似大学图书馆建书目索引，提高数据检索的效率，降低数据库的IO成本

- 通过索引列对数据进行排序，降低数据排序的成本，降低了CPU的消耗

### 3.劣势

- 虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。
  因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件每次更新添加了索引列的字段，
  都会调整因为更新所带来的键值变化后的索引信息
- 实际上索引也是一-张表，该表保存了主键与索引字段，并指向实体表的记录，所以索引列也是要占用空间

### 4.那些情况下需要建立索引

- 主键自动建立唯--索引
- 频繁作为查询条件的字段应该创建索引
- 查询中与其它表关联的字段，外键关系建立索引中
- 单键/组合索引的选择问题，**组合索引性价比更高**
- 查询中排序的字段，排序字段若通过索引去访问将大大提高排序速度
- **查询中统计或者分组字段**

### 5.那些情况下不需要建立索引

- 表记录太少
- 经常增删改的表或者字段
- Where条件里用不到的字段不创建索引
- **过滤性不好**的不适合建索引（区分行不强，例如男女）